<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta name="google" value="notranslate">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <script type="text/javascript" src="../bower_components/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../lib/layer/layer.js"></script>
    <script type="text/javascript" src="../lib/swiper-3.4.2.jquery.min.js"></script>
    <link rel="stylesheet" href="../clean.css">
    <link rel="stylesheet" href="../lib/swiper.css">
    <link rel="stylesheet" href="css/common.css">
    <title>730的N种可能</title>
</head>
<body>
<div class="container pc">
    <!--第一屏-->
    <div class="context part_1" id="part_1">
        <div class="content">
            <div class="text"><img alt="" src="images/part1_text_03.png"></div>
            <div class="logo"><img src="images/730logo_03.png" alt=""></div>
        </div>
    </div>
    <!--第二屏-->
    <div class="context part_2" id="part_2">
        <div class="content">
            <div class="title"><img src="images/part_2_title_03.png" alt=""></div>
            <div class="car"><img src="images/part_2_car_03.png" alt=""></div>
            <div class="rightForm">
                <ul>
                    <li><input type="text" id="name" value="姓名" maxlength="20"></li>
                    <li style="margin-left: 10px;"><input type="text" id="phone" value="电话" max-length="11"></li>
                    <li>
                        <select name="" id="pro" value="省"></select>
                    </li>
                    <li style="margin-left: 10px;">
                        <select name="" id="city" value="市"></select>
                    </li>
                    <li style="width: 426px;">
                        <select name="" id="delear" value=""></select>
                    </li>
                    <li style="width: 100%" class="checkMsg">
                        <label for="userAgree"><input type="checkbox" id="userAgree"> 本人同意《用户信息保护及政策声明》，上汽通用五菱 <br>将对您提交的个人信息保密，不对外公开</label>
                    </li>
                    <li style="width: 100%;" class="confirmBtn">
                        <div class="btn">立即提交</div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="context part_3" id="part_3">
        <div class="content">
            <div class="title"><img src="images/part_3_title_15.png"></div>
            <div class="btn goBuy"><img src="images/part_3_btn_03.png" alt=""></div>
        </div>
    </div>
    <div class="context part_4" id="part_4">
        <div class="content">
            <div class="title"><img src="images/part_4_title_03.png"></div>
            <div class="text">
                <p>
                    1.1元抢拍全新9.58w全新宝骏730，原价88折封顶
                </p>
                <p>
                    2.1元抢730购车抵扣券
                </p>
                <p>
                    3.购车成交用户<br>
                    &nbsp; &nbsp;前100名更可获得1000元现金红包<br>
                    &nbsp; &nbsp;101-500名成交用户可获得400元现金红包<br>
                    &nbsp; &nbsp;前200名用户可获得50元话费
                </p>
            </div>
            <div class="btn goBuy">立即抢购</div>
        </div>
    </div>
    <div class="context part_6" id="part_6">
        <div class="content">
            <div class="title"><img src="images/part_6_title_03.png" alt=""></div>
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <img src="images/part_6_item_07.jpg" alt="">
                    </div>
                    <div class="swiper-slide">
                        <img src="images/part_6_item_07.jpg" alt="">
                    </div>
                    <div class="swiper-slide">
                        <img src="images/part_6_item_07.jpg" alt="">
                    </div>
                </div>
            </div>
            <div class="btn" style="margin-top: 30px;">
                <img src="images/part_6_prev_10.png" alt="" class="prev">
                <img src="images/part_6_next_11.png" alt="" class="next">
            </div>
        </div>
    </div>
    <div class="context part_5" id="part_5" style="overflow: hidden;">
        <div class="content">
            <div class="title">
                <img src="images/part_5_title_03.png" alt="">
            </div>
            <div class="descContent">
                <div class="miniSwiper">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <img src="images/part_5_item_45.jpg" alt="">
                        </div>
                        <div class="swiper-slide">
                            <img src="images/part_5_item_45.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="desc">
                    <div><img src="images/part_5_desc_55.png" alt=""></div>
                    <h2>1元给全新宝骏730的 <br>N种可能</h2>
                    <p>要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案要文案</p>
                    <div class="nextBtn">
                        <img src="images/part_6_next_11.png" alt="">
                    </div>
                </div>

        </div>
        </div>
    </div>

</div>
<script type="text/javascript" src="../public/province.js"></script>
<script type="text/javascript" src="../public/city.js"></script>
<script type="text/javascript" src="../public/730dealer.js"></script>
<script type="text/javascript">
    $(function () {
      layer.config({
//        skin: 'demo-class'
        title:"提示"
      })

      var swiper = new Swiper('.swiper-container', {
        pagination: '.swiper-pagination',
        effect: 'coverflow',
        initialSlide:1,
        grabCursor: true,
        centeredSlides: true,
        slidesPerView: 'auto',
        coverflow: {
          rotate: 0,
          stretch: 0,
          depth: 500,
          modifier: 3,
          slideShadows : true
        }
      });
      var miniSwiper = new Swiper('.miniSwiper', {
        pagination: '.swiper-pagination',
        effect: 'coverflow',
        initialSlide:1,
        grabCursor: true,
        centeredSlides: true,
        slidesPerView: 'auto',
        coverflow: {
          rotate: 0,
          stretch: 0,
          depth: 600,
          modifier: 3,
          slideShadows : false,
        }
      });
      $(".miniSwiper .swiper-slide").click(function(){
        var url = ""
        if(miniSwiper.activeIndex == 0){
          url = ""
        }else if(miniSwiper.activeIndex == 1){
          url = ""
        }
        window.open(url);
      })
      $(".swiper-container .swiper-slide").click(
        function () {
          var videoUrl = '';
          if(swiper.activeIndex == 1){
            videoUrl = 'https://imgcache.qq.com/tencentvideo_v1/playerv3/TPout.swf?max_age=86400&v=20161117&vid=l0532d4s97h&auto=0';
          }else if(swiper.activeIndex == 2){
            videoUrl = 'https://imgcache.qq.com/tencentvideo_v1/playerv3/TPout.swf?max_age=86400&v=20161117&vid=k0532t6x5w0&auto=0';
          }else if(swiper.activeIndex == 0){
            videoUrl = 'https://imgcache.qq.com/tencentvideo_v1/playerv3/TPout.swf?max_age=86400&v=20161117&vid=v0532ifzplw&auto=0';
          }
          layer.open({
            type: 2,
            title: false,
            area: ['1000px', '680px'],
            shade: 0.8,
            closeBtn: 1,
            shadeClose: true,
            content: videoUrl,
          });
        }
      )

      $("#part_6 .btn .next").click(function () {
        var index = swiper.activeIndex + 1;
        index>2?index = 0:index = index;
        swiper.slideTo(index)
      })
      $("#part_6 .btn .prev").click(function () {
        var index = swiper.activeIndex - 1;
        index<0?index = 2:index = index;
        swiper.slideTo(index)
      })
      $("#part_5 .nextBtn img").click(function () {
//        alert("1")1
        var index = miniSwiper.activeIndex + 1;
        index>1?index = 0:index = index;
        miniSwiper.slideTo(index)
      })


      $(".goBuy").click(function () {
//        console.log($("#part_2"))
        $(document).scrollTop(587,500)
      })
      function createPro() {
        $("#pro").empty();
        $("#pro").append('<option sid="-1">请选择</option>');
        for (var i = 0; i < provinceData.length; i++) {
          $("#pro").append('<option sid=' + provinceData[i].proid + '>' + provinceData[i].proname + '</option>');
        }
      }
      createPro();
      $("#pro").change(function(event) {
        var _id = $("#pro option:selected").attr("sid");

        $("#city").empty();
        $("#city").append('<option sid="-1">请选择</option>');
        for (var i = 0; i < cicyData.length; i++) {
          if (cicyData[i].proID == _id) {
            $("#city").append('<option sid=' + cicyData[i].cityID + '>' + cicyData[i].cityName + '</option>');
          }
        }

        var _id = $("#city option:selected").attr("sid");
        $("#delear").empty();
        $("#delear").append('<option sid="-1">请选择</option>');
        for (var i = 0; i < WuLingdealers.length; i++) {
          if (WuLingdealers[i].city == _id) {
            $("#delear").append('<option sid=' + WuLingdealers[i].dealerCode + '>' + WuLingdealers[i].company + '</option>');
          }
        }
      });

      $("#name").focus(function () {
         if($(this).val()=="姓名") $(this).val("");
      })
      $("#name").blur(function () {
        if($(this).val()=="") $(this).val("姓名");
      })
      $("#phone").focus(function () {
        if($(this).val()=="电话") $(this).val("");
      })
      $("#phone").blur(function () {
        if($(this).val()=="") $(this).val("电话");
      })
      $("#city").change(function(event) {
        var _id = $("#city option:selected").attr("sid");

        $("#delear").empty();
        for (var i = 0; i < WuLingdealers.length; i++) {
          if (WuLingdealers[i].city == _id) {
            $("#delear").append('<option sid=' + WuLingdealers[i].dealerCode + '>' + WuLingdealers[i].company + '</option>');
          }
        }
      });
      $("#part_2 .btn").click(function () {
        if($("#userAgree").attr("checked")!='checked'){
          layer.alert("请勾选同意《用户信息保护及政策声明》");
          return false;
        };
          var name = $("#name").val();
          if (!validate.isEmpty(name)) {
            layer.alert("请输入姓名");
            return false;
          }
          var tel = $("#phone").val();
          if (!validate.isMobile(tel)) {
            layer.alert("请输入正确的手机号码");
            return false;
          }
          var province = $("#pro option:selected").text();
          if (province == "请选择") {
            layer.alert("请选择省份");
            return false;
          }
          var city = $("#city option:selected").text();
          if (city == "请选择") {
            layer.alert("请选择城市");
            return false;
          }
          var delear = $("#delear option:selected").text();
          if (delear == "请选择") {
            layer.alert("请选择经销商");
            return false;
          }
          addInfo(name, tel, $("#pro option:selected").attr("sid"), $("#city option:selected").attr("sid"), $("#delear option:selected").attr("sid"))
      })
      var validate = {
        isEmpty: function (val) {
          if (val == "") {
            return false;
          } else {
            return true;
          }
        },
        isMobile: function (val) {
          if (val == "") {
            return false;
          }
          if (!val.match(/^1[3|4|5|7|8][0-9]\d{4,8}$/) || val.length != 11) {
            return false;
          } else {
            return true;
          }
        },
      }
      function addInfo(_name, _tel, _province, _city, _dealer) {
        clickFlag = false;
        $.ajax({
          url: "http://www.sgmw.com.cn/ashx/reservation_json.aspx",
          dataType: 'jsonp',
          data: {
            aid: 165,
            fid: $_GET('MediaID'),
            lid: 0,
            name: _name,
            phone: _tel,
//            key: md5(_tel).toUpperCase().substr(0, 10),
            province: _province,
            city: _city,
            dealercode: _dealer,
            cartype: '宝骏730',
            mark: '',
            source: '全新宝骏730预约试驾',
            ordering: 0,
            driving: 1,
            credit: 0

          },
          jsonp: 'callback',
          success: function (result) {
            var wr = result.success[0].result;
            if (wr == 1) {
              layer.alert("预约成功");
            } else if (wr == 2) {
              layer.alert('您已预约成功,请勿重复提交');
            } else {
              layer.alert('预约失败，请稍后重试');
            }
            clickFlag = true;
          }

        });
      }
      function $_GET(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return "";
      }
    })
</script>
</body>
</html>